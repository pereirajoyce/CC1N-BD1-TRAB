create table Cliente (
    id Integer primary key,
    cpf Varchar2(14) not null,
    nome Varchar2(32) not null,
    email Varchar2(32),
    telefone Varchar2(32),
    
    unique (cpf),
    unique (email),
    unique (telefone)

);

create table Funcionario ( 
    id Integer primary key, 
    username Varchar2(32) not null, 
    nome Varchar2(32) not null, 
    cpf Varchar2(14) not null, 
    telefone Varchar2(32) not null, 
    email Varchar2(32) not null,
    
    unique (username),
    unique (telefone),
    unique (cpf),
    unique (email)
);

create table Balconista ( 
    nota Float not null,
    id_funcionario Integer,
    
    foreign key (id_funcionario) references Funcionario(id)
);

create table Atendimento (
    protocolo Integer primary key,
    data Timestamp not null,
    status Varchar2(32) not null,
    avaliacao Float not null,
    balconista_id_funcionario integer,
    
    foreign key (balconista_id_funcionario) references Funcionario (id),
    unique (protocolo)
);

create table Venda (
    id integer primary key,
    nota_fiscal Integer not null,
    data Timestamp not null,
    total Float not null,
    id_cliente Integer,
    balconista_id_funcionario Integer,
    
    foreign key (id_cliente) references Cliente (id),
    foreign key (balconista_id_funcionario) references Funcionario (id),
    unique (nota_fiscal)
);

create table Item (
    quantidade Integer not null,
    id_venda Integer,
    id_estoque Integer,
    
    foreign key (id_venda) references Venda (id),
    foreign key (id_estoque) references Estoque (id)
);

create table Estoque (
    id Integer primary key,
    titulo Varchar2(32) not null,
    autor Varchar2(32) not null,
    genero Varchar2(32) not null,
    preco Float not null,
    quantidade Number not null,
    danificados Number not null,
    
    unique (titulo, autor)
);